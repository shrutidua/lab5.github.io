<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ENGO551 - Lab 5 Assignment</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link rel="stylesheet" href="main.css">
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js%22%3E</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
</head>
<body>
  <div id="map" style="height: 50%; width: 100%;"></div>
  <div>
    <!-- Add the required input fields and buttons here -->
  </div>
  <script src="main.js"></script>

var map = L.map('map').setView([51.505, -0.09], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright%22%3EOpenStreetMap</a> contributors'
}).addTo(map);

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    console.log("Geolocation is not supported by this browser.");
  }
}

function showPosition(position) {
  console.log("Latitude: " + position.coords.latitude + ", Longitude: " + position.coords.longitude);
}

getLocation();

var client;

function connectMQTT(host, port) {
  client = new Paho.MQTT.Client(host, Number(port), "clientId");
  client.onConnectionLost = onConnectionLost;
  client.onMessageArrived = onMessageArrived;
  client.connect({onSuccess: onConnect});
}

function onConnect() {
  console.log("Connected");
  client.subscribe("<your course code>/<your name>/my_temperature");
}

function onConnectionLost(responseObject) {
  if (responseObject.errorCode !== 0) {
    console.log("Connection lost: " + responseObject.errorMessage);
    // Reconnect logic here
  }
}

function onMessageArrived(message) {
  console.log("Message arrived: " + message.payloadString);
}


</body>
</html>